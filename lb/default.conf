upstream source-app {
  server source-app1:8080;
  server source-app2:8080;
}

upstream rabbitmq {
  server mq1:15672;
  server mq2:15672;
}

server {
    listen       8080;
    server_name  _;

    location / {
        proxy_pass   http://source-app/;
        proxy_connect_timeout 5s;
    }
}

server {
    listen       15672;
    server_name  _;

    location / {
        proxy_pass   http://rabbitmq/;
        proxy_connect_timeout 5s;
    }
}

